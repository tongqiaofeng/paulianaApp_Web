{"version":3,"sources":["uni-app:///main.js",null,"webpack:///G:/aa-tong/my-project/a-Pauliana/paulianaApp_Web/pauliana/search.vue?03dc","webpack:///G:/aa-tong/my-project/a-Pauliana/paulianaApp_Web/pauliana/search.vue?c806","webpack:///G:/aa-tong/my-project/a-Pauliana/paulianaApp_Web/pauliana/search.vue?d324","uni-app:///pauliana/search.vue","webpack:///G:/aa-tong/my-project/a-Pauliana/paulianaApp_Web/pauliana/search.vue?e7b1","webpack:///G:/aa-tong/my-project/a-Pauliana/paulianaApp_Web/pauliana/search.vue?e6c5"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","components","HeaderTop","GoodsList","data","haveData","localImgUrl","scrollTop","keywords","searchHistory","recList","currentPage","pageNum","brandSeries","coBrandedSeries","tag","sort","navbar","searchList","loadStatus","searchStatus","focusStatus","menuBtnInfo","filterPopupShow","currentFilterValue","searchFilterList","onLoad","methods","getRecommendProductList","Api","res","setTimeout","onSearchClick","getSearchResult","params","keyword","page","clearSearchHistory","storage","numSort","priceSort","changeNavbar","onGoodsReachBottom","onGoodsScroll","clearKeywords","goBack","uni","delta","searchFilter","onFilterChange","chooseSearchFilter","_saveSearchHistory","_resetSearchParams","computed","headerHeight","searchScrollStyle","top","height","navbarStyle","goodsTop","watch"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACsC;;;AAG3F;AAC+K;AAC/K,gBAAgB,sLAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAA+pB,CAAgB,6pBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;AC+KnrB;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAMA;EACAC;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;;MAEAC;MACAC;IACA;EACA;EACAC;IACA;MACA;MACA;MACA;QACAjB;MACA;MACA;MACA;IACA;MACA;QACA;QACA;QACA;QACA;MACA;MACA;QACA;QACA;QACA;QACA;MACA;MACA;QACA;QACA;QACA;QACA;MACA;IACA;EACA;EACAkB;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAC;cAAA;gBAAA;gBAAAC;gBAEA;gBAEA;gBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;kBACAC;kBACAtB;kBACAC;kBACAsB;kBACAxB;kBACAI;kBACAD;gBACA;gBAAA;gBAAA,OACAc;cAAA;gBAAA;gBAAAC;gBAEA;gBAEA;kBACA1B;kBACA;oBACA;kBACA;oBACA;sBACA;oBACA;oBAEA2B;sBACA;oBACA;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAM;MACAC;MACA;IACA;IACAC;MACA;MAEA;MACA;MACA;MACA;MAEA;IACA;IACAC;MACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;MAEA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;QACAC;UACAC;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;QACA/C;MACA;MACA;QACAA;MACA;MACA;MACAkC;IACA;IACAc;MACA;MACA;MACA;MACA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;QACAC;QACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACAF;QACAG;QACAF;MACA;IACA;EACA;EACAG;IACApD;MAAA;MACA;QACA;QACA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;MACA;QACA;QACA;QACA;UACAC;QACA;QACA;QACA;QACA;MACA;IACA;IACAW;MAAA;MACA;QACAW;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC/aA;AAAA;AAAA;AAAA;AAAkxC,CAAgB,wsCAAG,EAAC,C;;;;;;;;;;;ACAtyC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pauliana/search.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pauliana/search.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./search.vue?vue&type=template&id=5ab85b06&scoped=true&\"\nvar renderjs\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=5ab85b06&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ab85b06\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pauliana/search.vue\"\nexport default component.exports","export * from \"-!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=template&id=5ab85b06&scoped=true&\"","var components\ntry {\n  components = {\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.haveData && _vm.searchStatus == \"\"\n      ? _vm.localImgUrl && _vm.searchHistory.length\n      : null\n  var g1 =\n    _vm.haveData && _vm.searchStatus == \"\"\n      ? _vm.searchHistory && _vm.searchHistory.length\n      : null\n  var g2 =\n    _vm.haveData && !(_vm.searchStatus == \"\") ? _vm.searchList.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\" v-if=\"haveData\">\r\n\t\t<HeaderTop\r\n\t\t\t:headerHeight=\"headerHeight\"\r\n\t\t\t:title=\"'产品搜索'\"\r\n\t\t\t:isDefaultBack=\"false\"\r\n\t\t\t@back=\"goBack\"\r\n\t\t/>\r\n\t\t<view class=\"search-bar-box\" :style=\"{ top: headerHeight + 10 + 'px' }\">\r\n\t\t\t<image\r\n\t\t\t\tclass=\"search-icon\"\r\n\t\t\t\tv-if=\"localImgUrl\"\r\n\t\t\t\t:src=\"localImgUrl + '/common/search.png'\"\r\n\t\t\t></image>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\tv-model=\"keywords\"\r\n\t\t\t\t:focus=\"focusStatus\"\r\n\t\t\t\tplaceholder-class=\"search-placeholder\"\r\n\t\t\t\tplaceholder=\"产品/品牌\"\r\n\t\t\t/>\r\n\t\t\t<image\r\n\t\t\t\tclass=\"del-icon\"\r\n\t\t\t\t@click=\"clearKeywords\"\r\n\t\t\t\tv-if=\"localImgUrl && keywords\"\r\n\t\t\t\t:src=\"localImgUrl + '/common/search_del.png'\"\r\n\t\t\t></image>\r\n\t\t</view>\r\n\t\t<view class=\"search-recommend-box\" v-if=\"searchStatus == ''\">\r\n\t\t\t<scroll-view\r\n\t\t\t\t@scroll=\"onGoodsScroll\"\r\n\t\t\t\tscroll-y\r\n\t\t\t\tclass=\"search-scroll\"\r\n\t\t\t\t:style=\"{\r\n\t\t\t\t\ttop: searchScrollStyle.top + 'rpx',\r\n\t\t\t\t\theight: searchScrollStyle.height,\r\n\t\t\t\t}\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"search-history\">\r\n\t\t\t\t\t<view class=\"search-header flex-center-between\">\r\n\t\t\t\t\t\t<h5 class=\"font-tit\">搜索历史</h5>\r\n\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\tclass=\"del-icon\"\r\n\t\t\t\t\t\t\tv-if=\"localImgUrl && searchHistory.length\"\r\n\t\t\t\t\t\t\t:src=\"localImgUrl + '/common/del_icon.png'\"\r\n\t\t\t\t\t\t\t@click=\"clearSearchHistory\"\r\n\t\t\t\t\t\t></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tclass=\"search-keywords\"\r\n\t\t\t\t\t\tv-if=\"searchHistory && searchHistory.length\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tclass=\"keyword\"\r\n\t\t\t\t\t\t\tv-for=\"item in searchHistory\"\r\n\t\t\t\t\t\t\t:key=\"item\"\r\n\t\t\t\t\t\t\t@click=\"onSearchClick(item)\"\r\n\t\t\t\t\t\t\t>{{ item }}</text\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- recommend -->\r\n\t\t\t\t<view class=\"recommend-box\">\r\n\t\t\t\t\t<view class=\"search-header flex-center-between\">\r\n\t\t\t\t\t\t<h5 class=\"font-tit\">推荐商品</h5>\r\n\r\n\t\t\t\t\t\t<view class=\"filter-wrap\" @click=\"searchFilter\">\r\n\t\t\t\t\t\t\t<text class=\"filter-font\">筛选</text>\r\n\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t\tclass=\"filter-icon\"\r\n\t\t\t\t\t\t\t\tv-if=\"localImgUrl\"\r\n\t\t\t\t\t\t\t\t:src=\"localImgUrl + '/common/filter_icon.png'\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"goods-box\">\r\n\t\t\t\t\t\t<GoodsList :goodsList=\"recList\" :scrollTop=\"scrollTop\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 搜索结果 -->\r\n\t\t<view class=\"search-goods-box\" v-else>\r\n\t\t\t<view class=\"navbar-list\" :style=\"{ top: navbarStyle.top + 'rpx' }\">\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"navbar-tip\"\r\n\t\t\t\t\t:class=\"{ 'navbar-active': navbar == '综合' }\"\r\n\t\t\t\t\t@click=\"changeNavbar('综合')\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<text class=\"navbar-tit\">综合</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"navbar-tip\"\r\n\t\t\t\t\t:class=\"{ 'navbar-active': navbar == '销量' }\"\r\n\t\t\t\t\t@click=\"numSort('销量')\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<text class=\"navbar-tit\">销量</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"navbar-tip\"\r\n\t\t\t\t\t:class=\"{ 'navbar-active': navbar == '价格' }\"\r\n\t\t\t\t\t@click=\"priceSort('价格')\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<text class=\"navbar-tit\">价格</text>\r\n\t\t\t\t\t<image\r\n\t\t\t\t\t\tclass=\"price-sort-icon\"\r\n\t\t\t\t\t\tv-if=\"localImgUrl && sort == 0\"\r\n\t\t\t\t\t\t:src=\"localImgUrl + '/common/sort.png'\"\r\n\t\t\t\t\t></image>\r\n\t\t\t\t\t<image\r\n\t\t\t\t\t\tclass=\"price-sort-icon\"\r\n\t\t\t\t\t\tv-if=\"localImgUrl && sort == 1\"\r\n\t\t\t\t\t\t:src=\"localImgUrl + '/common/sort_up.png'\"\r\n\t\t\t\t\t></image>\r\n\t\t\t\t\t<image\r\n\t\t\t\t\t\tclass=\"price-sort-icon\"\r\n\t\t\t\t\t\tv-if=\"localImgUrl && sort == -1\"\r\n\t\t\t\t\t\t:src=\"localImgUrl + '/common/sort_down.png'\"\r\n\t\t\t\t\t></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<scroll-view\r\n\t\t\t\tscroll-y\r\n\t\t\t\tclass=\"goods-scroll\"\r\n\t\t\t\t@scrolltolower=\"onGoodsReachBottom\"\r\n\t\t\t\t@scroll=\"onGoodsScroll\"\r\n\t\t\t\t:style=\"{\r\n\t\t\t\t\ttop: navbarStyle.goodsTop + 'rpx',\r\n\t\t\t\t\theight: navbarStyle.height,\r\n\t\t\t\t}\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"goods-box\" v-if=\"searchList.length\">\r\n\t\t\t\t\t<GoodsList\r\n\t\t\t\t\t\t:goodsList=\"searchList\"\r\n\t\t\t\t\t\t:marginTop=\"0\"\r\n\t\t\t\t\t\t:scrollTop=\"scrollTop\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<text class=\"notice-bottom-font\" v-if=\"loadStatus\"\r\n\t\t\t\t\t\t>已经到底了哦~</text\r\n\t\t\t\t\t>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-else class=\"no-data\" :style=\"{ paddingTop: '300rpx' }\">\r\n\t\t\t\t\t<image\r\n\t\t\t\t\t\tv-if=\"localImgUrl\"\r\n\t\t\t\t\t\t:src=\"localImgUrl + '/common/no.png'\"\r\n\t\t\t\t\t\tmode=\"aspectFill\"\r\n\t\t\t\t\t></image>\r\n\t\t\t\t\t<text style=\"font-size: 30rpx\">暂无搜索商品~</text>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 筛选弹窗 -->\r\n\t\t<uni-popup ref=\"filterPopup\" type=\"bottom\" @change=\"onFilterChange\">\r\n\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t<view class=\"popup-title\"> 商品筛选 </view>\r\n\t\t\t\t<view class=\"gemstone-list\">\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tv-for=\"(item, index) in searchFilterList\"\r\n\t\t\t\t\t\t:Key=\"index\"\r\n\t\t\t\t\t\t@click=\"chooseSearchFilter(item)\"\r\n\t\t\t\t\t\tclass=\"gemstone-option ellipsis\"\r\n\t\t\t\t\t\t:class=\"[item == currentFilterValue ? 'active' : '']\"\r\n\t\t\t\t\t\t>{{ item }}</text\r\n\t\t\t\t\t>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nconst app = getApp();\r\nimport storage from '@/utils/storage';\r\nimport * as Api from '@/api/api';\r\nimport HeaderTop from '@/components/header-top/header-top';\r\nimport GoodsList from '@/components/goods-list/goods-list';\r\n\r\nexport default {\r\n\tname: 'searchPage',\r\n\tcomponents: {\r\n\t\tHeaderTop,\r\n\t\tGoodsList,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thaveData: false,\r\n\t\t\tlocalImgUrl: app.globalData.localImgUrl,\r\n\t\t\tscrollTop: 0,\r\n\t\t\tkeywords: '',\r\n\t\t\tsearchHistory: [],\r\n\r\n\t\t\trecList: [], // 推荐产品\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tpageNum: 10,\r\n\t\t\tbrandSeries: '', //品牌系列\r\n\t\t\tcoBrandedSeries: '', // 联名系列\r\n\t\t\ttag: '', // 标签；项链，耳饰，戒指，手链\r\n\t\t\tsort: 0, // 排序规则 1正序 -1倒序 0默认\r\n\t\t\tnavbar: '综合',\r\n\t\t\tsearchList: [],\r\n\t\t\tloadStatus: false, // 加载数据状态\r\n\t\t\tsearchStatus: '', // 搜索状态 keyword brandSeries coBrandedSeries coBrandedSeries\r\n\t\t\tfocusStatus: true,\r\n\t\t\tmenuBtnInfo: uni.getMenuButtonBoundingClientRect(),\r\n\t\t\tfilterPopupShow: false, // 筛选弹窗\r\n\r\n\t\t\tcurrentFilterValue: '',\r\n\t\t\tsearchFilterList: ['巴宝莉', '爱马仕', 'lv'],\r\n\t\t};\r\n\t},\r\n\tonLoad(options) {\r\n\t\tif (!Object.keys(options).length) {\r\n\t\t\t// 搜索\r\n\t\t\tlet searchHistory = [];\r\n\t\t\tif (storage.get('search_history')) {\r\n\t\t\t\tsearchHistory = storage.get('search_history');\r\n\t\t\t}\r\n\t\t\tthis.searchHistory = searchHistory;\r\n\t\t\tthis.getRecommendProductList();\r\n\t\t} else {\r\n\t\t\tif (options.brandSeries) {\r\n\t\t\t\tthis.brandSeries = options.brandSeries;\r\n\t\t\t\tthis.searchStatus = 'brandSeries';\r\n\t\t\t\tthis.focusStatus = false;\r\n\t\t\t\tthis.keywords = options.brandSeries;\r\n\t\t\t}\r\n\t\t\tif (options.coBrandedSeries) {\r\n\t\t\t\tthis.coBrandedSeries = options.coBrandedSeries;\r\n\t\t\t\tthis.searchStatus = 'coBrandedSeries';\r\n\t\t\t\tthis.focusStatus = false;\r\n\t\t\t\tthis.keywords = options.coBrandedSeries;\r\n\t\t\t}\r\n\t\t\tif (options.tag) {\r\n\t\t\t\tthis.tag = options.tag;\r\n\t\t\t\tthis.searchStatus = 'tag';\r\n\t\t\t\tthis.focusStatus = false;\r\n\t\t\t\tthis.keywords = options.tag;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 推荐产品\r\n\t\tasync getRecommendProductList() {\r\n\t\t\tconst { data: res } = await Api.recommendProductList();\r\n\r\n\t\t\tthis.haveData = true;\r\n\r\n\t\t\tthis.recList = res.data;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.scrollTop++;\r\n\t\t\t}, 500);\r\n\t\t},\r\n\t\tonSearchClick(keyword) {\r\n\t\t\tthis.keywords = keyword;\r\n\t\t},\r\n\r\n\t\t// 搜索数据\r\n\t\tasync getSearchResult() {\r\n\t\t\tconst params = {\r\n\t\t\t\tkeyword: this.keywords,\r\n\t\t\t\tbrandSeries: this.brandSeries,\r\n\t\t\t\tcoBrandedSeries: this.coBrandedSeries,\r\n\t\t\t\tpage: this.currentPage,\r\n\t\t\t\tpageNum: this.pageNum,\r\n\t\t\t\tsort: this.sort,\r\n\t\t\t\ttag: this.tag,\r\n\t\t\t};\r\n\t\t\tconst { data: res } = await Api.jewellerySearch(params);\r\n\r\n\t\t\tthis.haveData = true;\r\n\r\n\t\t\tif (res.code == 200) {\r\n\t\t\t\tlet data = res.data;\r\n\t\t\t\tif (!data.list.length) {\r\n\t\t\t\t\tthis.searchList = [];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (data.list.length < this.pageNum) {\r\n\t\t\t\t\t\tthis.loadStatus = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.scrollTop++;\r\n\t\t\t\t\t}, 500);\r\n\t\t\t\t\tthis.searchList = [...this.searchList, ...data.list];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tclearSearchHistory() {\r\n\t\t\tstorage.remove('search_history');\r\n\t\t\tthis.searchHistory = [];\r\n\t\t},\r\n\t\tnumSort(status) {\r\n\t\t\tthis.navbar = status;\r\n\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.sort = 0;\r\n\t\t\tthis.loadStatus = false;\r\n\t\t\tthis.searchList = [];\r\n\r\n\t\t\tthis.getSearchResult();\r\n\t\t},\r\n\t\tpriceSort(status) {\r\n\t\t\tthis.navbar = status;\r\n\t\t\tif (this.navbar == '价格') {\r\n\t\t\t\tif (this.sort == 0 || this.sort == -1) {\r\n\t\t\t\t\tthis.sort = 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sort = -1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.loadStatus = false;\r\n\t\t\tthis.searchList = [];\r\n\t\t\tthis.getSearchResult();\r\n\t\t},\r\n\t\tchangeNavbar(status) {\r\n\t\t\tthis.navbar = status;\r\n\t\t\tthis._resetSearchParams();\r\n\t\t\tthis.getSearchResult();\r\n\t\t},\r\n\t\t// 搜索商品触底\r\n\t\tonGoodsReachBottom() {\r\n\t\t\tif (!this.loadStatus) {\r\n\t\t\t\tthis.currentPage += 1;\r\n\t\t\t\tthis.getSearchResult();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonGoodsScroll(e) {\r\n\t\t\tlet { scrollTop } = e.detail;\r\n\t\t\tthis.scrollTop = scrollTop;\r\n\t\t},\r\n\t\tclearKeywords() {\r\n\t\t\tthis.keywords = '';\r\n\t\t},\r\n\t\t// 返回事件\r\n\t\tgoBack() {\r\n\t\t\tif (!this.keywords) {\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.keywords = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\tsearchFilter() {\r\n\t\t\tthis.$refs.filterPopup.open();\r\n\t\t},\r\n\t\tonFilterChange(e) {\r\n\t\t\tthis.filterPopupShow = e.show;\r\n\t\t},\r\n\t\tchooseSearchFilter(value) {\r\n\t\t\tthis.currentFilterValue = value;\r\n\t\t},\r\n\t\t// 存储搜索历史\r\n\t\t_saveSearchHistory(keyword) {\r\n\t\t\tlet data = [];\r\n\t\t\tif (storage.get('search_history')) {\r\n\t\t\t\tdata = storage.get('search_history');\r\n\t\t\t}\r\n\t\t\tif (data.indexOf(keyword) == -1) {\r\n\t\t\t\tdata.push(keyword);\r\n\t\t\t}\r\n\t\t\tthis.searchHistory = data;\r\n\t\t\tstorage.set('search_history', data);\r\n\t\t},\r\n\t\t_resetSearchParams() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.sort = 0;\r\n\t\t\tthis.loadStatus = false;\r\n\t\t\tthis.searchList = [];\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\theaderHeight() {\r\n\t\t\treturn this.menuBtnInfo.height + this.menuBtnInfo.top;\r\n\t\t},\r\n\t\tsearchScrollStyle() {\r\n\t\t\tlet headerHeight = this.menuBtnInfo.height + this.menuBtnInfo.top;\r\n\t\t\tlet top = (headerHeight + 10) * 2 + 112;\r\n\t\t\treturn {\r\n\t\t\t\ttop: top,\r\n\t\t\t\theight: `calc(100vh - ${top}rpx)`,\r\n\t\t\t};\r\n\t\t},\r\n\t\tnavbarStyle() {\r\n\t\t\tlet headerHeight = this.menuBtnInfo.height + this.menuBtnInfo.top;\r\n\t\t\tlet top = (headerHeight + 10) * 2 + 102;\r\n\t\t\tlet goodsTop = top + 124;\r\n\t\t\treturn {\r\n\t\t\t\ttop: top,\r\n\t\t\t\tgoodsTop: goodsTop,\r\n\t\t\t\theight: `calc(100vh - ${goodsTop}rpx)`,\r\n\t\t\t};\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\tkeywords(value) {\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.searchStatus = 'keyword';\r\n\t\t\t\tthis.timer && clearTimeout(this.timer);\r\n\t\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\tthis.navbar = '综合';\r\n\t\t\t\t\tthis.sort = 0;\r\n\t\t\t\t\tthis.searchList = [];\r\n\t\t\t\t\tthis.loadStatus = false;\r\n\t\t\t\t\tthis._saveSearchHistory(value);\r\n\t\t\t\t\tthis.getSearchResult();\r\n\t\t\t\t}, 200);\r\n\t\t\t} else {\r\n\t\t\t\tthis.searchStatus = '';\r\n\t\t\t\tlet searchHistory = [];\r\n\t\t\t\tif (storage.get('search_history')) {\r\n\t\t\t\t\tsearchHistory = storage.get('search_history');\r\n\t\t\t\t}\r\n\t\t\t\tthis.searchHistory = searchHistory;\r\n\t\t\t\tthis.getRecommendProductList();\r\n\t\t\t\tthis._resetSearchParams();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsearchStatus(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.scrollTop++;\r\n\t\t\t\t}, 500);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n\twidth: 100%;\r\n\tmin-height: 100vh;\r\n\r\n\th5 {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-family: 'PingFang SC-Bold';\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #171d26;\r\n\t\tline-height: 28rpx;\r\n\t}\r\n\r\n\t.search-bar-box {\r\n\t\twidth: 690rpx;\r\n\t\theight: 72rpx;\r\n\t\topacity: 1;\r\n\t\tpadding: 20rpx 0;\r\n\t\tbackground-color: #fff;\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 30rpx;\r\n\t\tright: 30rpx;\r\n\t\tz-index: 99;\r\n\r\n\t\t.search-icon {\r\n\t\t\twidth: 40rpx;\r\n\t\t\theight: 40rpx;\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 32rpx;\r\n\t\t}\r\n\r\n\t\tinput {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: inherit;\r\n\t\t\tbackground: #f5f6f7;\r\n\t\t\tpadding-left: 88rpx;\r\n\t\t\tpadding-right: 40rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\tborder-radius: 8rpx;\r\n\t\t}\r\n\r\n\t\t.del-icon {\r\n\t\t\twidth: 36rpx;\r\n\t\t\theight: 36rpx;\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 32rpx;\r\n\t\t\tz-index: 999;\r\n\t\t}\r\n\r\n\t\t.search-placeholder {\r\n\t\t\tcolor: #888d94;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\r\n\t\t.search-tip {\r\n\t\t\twidth: 76rpx;\r\n\t\t\tdisplay: inline-block;\r\n\t\t\ttext-align: right;\r\n\t\t\theight: 72rpx;\r\n\t\t\tline-height: 72rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tfont-family: 'PingFang SC-Medium';\r\n\t\t\tfont-weight: 500;\r\n\t\t\tcolor: #171d26;\r\n\t\t}\r\n\t}\r\n\r\n\t// search-recommend-box\r\n\t.search-recommend-box {\r\n\t\t.search-scroll {\r\n\t\t\tposition: fixed;\r\n\t\t}\r\n\r\n\t\t.search-history {\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 0 30rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tmargin-top: 20rpx;\r\n\r\n\t\t\t.search-header {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\t.del-icon {\r\n\t\t\t\t\twidth: 36rpx;\r\n\t\t\t\t\theight: 36rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.search-keywords {\r\n\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\tdisplay: inline-flex;\r\n\t\t\t\tflex-wrap: wrap;\r\n\r\n\t\t\t\t.keyword {\r\n\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tfont-family: 'PingFang SC-Medium';\r\n\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t\tcolor: #888d94;\r\n\t\t\t\t\tline-height: 24rpx;\r\n\t\t\t\t\tmargin-right: 64rpx;\r\n\t\t\t\t\tmargin-top: 30rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.recommend-box {\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 0 30rpx 40rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tmargin-top: 60rpx;\r\n\t\t\t.filter-wrap {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\t.filter-font {\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: #888d94;\r\n\t\t\t\t}\r\n\t\t\t\t.filter-icon {\r\n\t\t\t\t\twidth: 24rpx;\r\n\t\t\t\t\theight: 26rpx;\r\n\t\t\t\t\tmargin-left: 4rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// search-goods-box\r\n\t.search-goods-box {\r\n\t\tposition: relative;\r\n\r\n\t\t.navbar-list {\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 48rpx 78rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tposition: fixed;\r\n\t\t\ttop: 280rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tz-index: 999;\r\n\t\t\tbackground-color: #fff;\r\n\r\n\t\t\t.navbar-tip {\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tfont-family: 'PingFang SC-Medium';\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tcolor: #505459;\r\n\t\t\t\tline-height: 28rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.navbar-active {\r\n\t\t\t\tcolor: #55b8b8;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\r\n\t\t\t.price-sort-icon {\r\n\t\t\t\twidth: 16rpx;\r\n\t\t\t\theight: 25rpx;\r\n\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.goods-scroll {\r\n\t\t\theight: calc(100vh - 236rpx);\r\n\t\t\tposition: fixed;\r\n\t\t\ttop: 236rpx;\r\n\t\t}\r\n\r\n\t\t.goods-box {\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 0 30rpx 40rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tposition: relative;\r\n\t\t}\r\n\t}\r\n\r\n\t.popup-content {\r\n\t\twidth: 100%;\r\n\t\tpadding-top: 60rpx;\r\n\t\tpadding-bottom: 60rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-top-left-radius: 24rpx;\r\n\t\tborder-top-right-radius: 24rpx;\r\n\r\n\t\t.popup-title {\r\n\t\t\tmargin-bottom: 80rpx;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\r\n\t\t.gemstone-list {\r\n\t\t\tpadding: 0 20rpx;\r\n\t\t\tmargin-top: 40rpx;\r\n\t\t\tdisplay: grid;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tgrid-template-columns: repeat(auto-fill, 220rpx);\r\n\t\t\tgrid-gap: 20rpx;\r\n\r\n\t\t\t.gemstone-option {\r\n\t\t\t\theight: 66rpx;\r\n\t\t\t\tpadding: 0 20rpx;\r\n\t\t\t\tmargin-bottom: 28rpx;\r\n\t\t\t\tbackground-color: #f5f6f7;\r\n\t\t\t\tborder-radius: 38rpx;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tcolor: #171d26;\r\n\t\t\t\tline-height: 66rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tbox-sizing: border-box;\r\n\r\n\t\t\t\t&.active {\r\n\t\t\t\t\tborder: 2rpx solid #55b8b8;\r\n\t\t\t\t\tbackground-color: rgba(85, 184, 184, 0.3);\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.filter-btn {\r\n\t\t\twidth: 690rpx;\r\n\t\t\theight: 88rpx;\r\n\t\t\tline-height: 88rpx;\r\n\t\t\tbackground: #55b8b8;\r\n\t\t\tborder-radius: 4rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: #fff;\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin: 32rpx auto;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&id=5ab85b06&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Download/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&id=5ab85b06&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1677142932824\n      var cssReload = require(\"G:/Download/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}